@if (quiz) {
  <mat-card class="quiz-card">

    <!-- بالای کارت: عنوان، تایمر و دکمه پایان -->
    <div class="quiz-header">
      <div class="quiz-info">
        <mat-card-title>{{ quiz.title }}</mat-card-title>
        <div class="timer">
          ⏱ زمان باقیمانده: <span class="time-display">{{ displayTime }}</span>
        </div>
      </div>

      <button
        mat-raised-button
        color="warn"
        class="end-btn"
        (click)="submitQuiz()"
        [disabled]="isSubmitted">
        پایان آزمون
      </button>
    </div>

    <!-- نوار پیشرفت -->
    <mat-progress-bar mode="determinate" [value]="progress"></mat-progress-bar>

    <!-- نمایش سوالات -->
    <div class="questions">
      @for (q of quiz.questions; track $index) {
        <div class="question-block">
          <h3>{{ $index + 1 }}. {{ q.text }}</h3>
    
          <mat-radio-group [(ngModel)]="answers[q.id]">
            @for (a of q.answers; track $index) {
              <mat-radio-button [value]="a.id" class="answer">
                {{ a.text }}
              </mat-radio-button>
            }
          </mat-radio-group>
        </div>
      }
    </div>
  </mat-card>
}
@else {
  <mat-card>
    <mat-card-title>در حال بارگذاری آزمون...</mat-card-title>
  </mat-card>
}
